(function(x){var K,Q,d,J,b,s,H,N,w,y=0,h={},g=[],e=0,D={},v=[],M=null,j=new Image(),I=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,E=/[^\.]\.(swf)\s*$/i,n,L=1,S,c,O=false,m=20,p=x.extend(x("<div/>")[0],{prop:0}),F=0,R=!x.support.opacity&&!window.XMLHttpRequest,G=function(){Q.hide();j.onerror=j.onload=null;if(M){M.abort()}K.empty()},z=function(){x.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{scrolling:"no",padding:20,transitionIn:"none",transitionOut:"none"})},k=function(){return[x(window).width(),x(window).height(),x(document).scrollLeft(),x(document).scrollTop()]},a=function(){var X=k(),ac={},W=D.margin,Z=D.autoScale,ab=(m+W)*2,V=(m+W)*2,Y=(D.padding*2),aa;if(D.width.toString().indexOf("%")>-1){ac.width=((X[0]*parseFloat(D.width))/100)-(m*2);Z=false}else{ac.width=D.width+Y}if(D.height.toString().indexOf("%")>-1){ac.height=((X[1]*parseFloat(D.height))/100)-(m*2);Z=false}else{ac.height=D.height+Y}if(Z&&(ac.width>(X[0]-ab)||ac.height>(X[1]-V))){if(h.type=="image"||h.type=="swf"){ab+=Y;V+=Y;aa=Math.min(Math.min(X[0]-ab,D.width)/D.width,Math.min(X[1]-V,D.height)/D.height);ac.width=Math.round(aa*(ac.width-Y))+Y;ac.height=Math.round(aa*(ac.height-Y))+Y}else{ac.width=Math.min(ac.width,(X[0]-ab));ac.height=Math.min(ac.height,(X[1]-V))}}ac.top=X[3]+((X[1]-(ac.height+(m*2)))*0.5);ac.left=X[2]+((X[0]-(ac.width+(m*2)))*0.5);if(D.autoScale===false){ac.top=Math.max(X[3]+W,ac.top);ac.left=Math.max(X[2]+W,ac.left)}return ac},f=function(V){if(V&&V.length){switch(D.titlePosition){case"inside":return V;case"over":return'<span id="fancybox-title-over">'+V+"</span>";default:return'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+V+'</span><span id="fancybox-title-right"></span></span>'}}return false},o=function(){var X=D.title,W=c.width-(D.padding*2),V="fancybox-title-"+D.titlePosition;x("#fancybox-title").remove();F=0;if(D.titleShow===false){return}X=x.isFunction(D.titleFormat)?D.titleFormat(X,v,e,D):f(X);if(!X||X===""){return}x('<div id="fancybox-title" class="'+V+'" />').css({width:W,paddingLeft:D.padding,paddingRight:D.padding}).html(X).appendTo("body");switch(D.titlePosition){case"inside":F=x("#fancybox-title").outerHeight(true)-D.padding;c.height+=F;break;case"over":x("#fancybox-title").css("bottom",D.padding);break;default:x("#fancybox-title").css("bottom",x("#fancybox-title").outerHeight(true)*-1);break}x("#fancybox-title").appendTo(b).hide()},B=function(){x(document).unbind("keydown.fb").bind("keydown.fb",function(V){if(V.keyCode==27&&D.enableEscapeButton){V.preventDefault();x.fancybox.close()}else{if(V.keyCode==37){V.preventDefault();x.fancybox.prev()}else{if(V.keyCode==39){V.preventDefault();x.fancybox.next()}}}});if(x.fn.mousewheel){J.unbind("mousewheel.fb");if(v.length>1){J.bind("mousewheel.fb",function(V,W){V.preventDefault();if(O||W===0){return}if(W>0){x.fancybox.prev()}else{x.fancybox.next()}})}}if(!D.showNavArrows){return}if((D.cyclic&&v.length>1)||e!==0){N.show()}if((D.cyclic&&v.length>1)||e!=(v.length-1)){w.show()}},U=function(){var V,W;if((v.length-1)>e){V=v[e+1].href;if(typeof V!=="undefined"&&V.match(I)){W=new Image();W.src=V}}if(e>0){V=v[e-1].href;if(typeof V!=="undefined"&&V.match(I)){W=new Image();W.src=V}}},r=function(){s.css("overflow",(D.scrolling=="auto"?(D.type=="image"||D.type=="iframe"||D.type=="swf"?"hidden":"auto"):(D.scrolling=="yes"?"auto":"visible")));if(!x.support.opacity){s.get(0).style.removeAttribute("filter");J.get(0).style.removeAttribute("filter")}x("#fancybox-title").show();if(D.hideOnContentClick){s.one("click",x.fancybox.close)}if(D.hideOnOverlayClick){d.one("click",x.fancybox.close)}if(D.showCloseButton){H.show()}B();x(window).bind("resize.fb",x.fancybox.center);if(D.centerOnScroll){x(window).bind("scroll.fb",x.fancybox.center)}else{x(window).unbind("scroll.fb")}if(x.isFunction(D.onComplete)){D.onComplete(v,e,D)}O=false;U()},i=function(Z){var V=Math.round(S.width+(c.width-S.width)*Z),W=Math.round(S.height+(c.height-S.height)*Z),Y=Math.round(S.top+(c.top-S.top)*Z),X=Math.round(S.left+(c.left-S.left)*Z);J.css({width:V+"px",height:W+"px",top:Y+"px",left:X+"px"});V=Math.max(V-D.padding*2,0);W=Math.max(W-(D.padding*2+(F*Z)),0);s.css({width:V+"px",height:W+"px"});if(typeof c.opacity!=="undefined"){J.css("opacity",(Z<0.5?0.5:Z))}},u=function(V){var W=V.offset();W.top+=parseFloat(V.css("paddingTop"))||0;W.left+=parseFloat(V.css("paddingLeft"))||0;W.top+=parseFloat(V.css("border-top-width"))||0;W.left+=parseFloat(V.css("border-left-width"))||0;W.width=V.width();W.height=V.height();return W},T=function(){var Y=h.orig?x(h.orig):false,X={},W,V;if(Y&&Y.length){W=u(Y);X={width:(W.width+(D.padding*2)),height:(W.height+(D.padding*2)),top:(W.top-D.padding-m),left:(W.left-D.padding-m)}}else{V=k();X={width:1,height:1,top:V[3]+V[1]*0.5,left:V[2]+V[0]*0.5}}return X},q=function(){Q.hide();if(J.is(":visible")&&x.isFunction(D.onCleanup)){if(D.onCleanup(v,e,D)===false){x.event.trigger("fancybox-cancel");O=false;return}}v=g;e=y;D=h;s.get(0).scrollTop=0;s.get(0).scrollLeft=0;if(D.overlayShow){if(R){x("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}d.css({"background-color":D.overlayColor,opacity:D.overlayOpacity}).unbind().show()}c=a();o();if(J.is(":visible")){x(H.add(N).add(w)).hide();var W=J.position(),V;S={top:W.top,left:W.left,width:J.width(),height:J.height()};V=(S.width==c.width&&S.height==c.height);s.fadeOut(D.changeFade,function(){var X=function(){s.html(K.contents()).fadeIn(D.changeFade,r)};x.event.trigger("fancybox-change");s.empty().css("overflow","hidden");if(V){s.css({top:D.padding,left:D.padding,width:Math.max(c.width-(D.padding*2),1),height:Math.max(c.height-(D.padding*2)-F,1)});X()}else{s.css({top:D.padding,left:D.padding,width:Math.max(S.width-(D.padding*2),1),height:Math.max(S.height-(D.padding*2),1)});p.prop=0;x(p).animate({prop:1},{duration:D.changeSpeed,easing:D.easingChange,step:i,complete:X})}});return}J.css("opacity",1);if(D.transitionIn=="elastic"){S=T();s.css({top:D.padding,left:D.padding,width:Math.max(S.width-(D.padding*2),1),height:Math.max(S.height-(D.padding*2),1)}).html(K.contents());J.css(S).show();if(D.opacity){c.opacity=0}p.prop=0;x(p).animate({prop:1},{duration:D.speedIn,easing:D.easingIn,step:i,complete:r})}else{s.css({top:D.padding,left:D.padding,width:Math.max(c.width-(D.padding*2),1),height:Math.max(c.height-(D.padding*2)-F,1)}).html(K.contents());J.css(c).fadeIn(D.transitionIn=="none"?0:D.speedIn,r)}},t=function(){K.width(h.width);K.height(h.height);if(h.width=="auto"){h.width=K.width()}if(h.height=="auto"){h.height=K.height()}q()},P=function(){O=true;h.width=j.width;h.height=j.height;x("<img />").attr({id:"fancybox-img",src:j.src,alt:h.title}).appendTo(K);q()},C=function(){G();var aa=g[y],X,Y,ac,ab,W,V,Z;h=x.extend({},x.fn.fancybox.defaults,(typeof x(aa).data("fancybox")=="undefined"?h:x(aa).data("fancybox")));ac=aa.title||x(aa).title||h.title||"";if(aa.nodeName&&!h.orig){h.orig=x(aa).children("img:first").length?x(aa).children("img:first"):x(aa)}if(ac===""&&h.orig){ac=h.orig.attr("alt")}if(aa.nodeName&&(/^(?:javascript|#)/i).test(aa.href)){X=h.href||null}else{X=h.href||aa.href||null}if(h.type){Y=h.type;if(!X){X=h.content}}else{if(h.content){Y="html"}else{if(X){if(X.match(I)){Y="image"}else{if(X.match(E)){Y="swf"}else{if(x(aa).hasClass("iframe")){Y="iframe"}else{if(X.match(/#/)){aa=X.substr(X.indexOf("#"));Y=x(aa).length>0?"inline":"ajax"}else{Y="ajax"}}}}}else{Y="inline"}}}h.type=Y;h.href=X;h.title=ac;if(h.autoDimensions&&h.type!=="iframe"&&h.type!=="swf"){h.width="auto";h.height="auto"}if(h.modal){h.overlayShow=true;h.hideOnOverlayClick=false;h.hideOnContentClick=false;h.enableEscapeButton=false;h.showCloseButton=false}if(x.isFunction(h.onStart)){if(h.onStart(g,y,h)===false){O=false;return}}K.css("padding",(m+h.padding+h.margin));x(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){x(this).replaceWith(s.children())});switch(Y){case"html":K.html(h.content);t();break;case"inline":x('<div class="fancybox-inline-tmp" />').hide().insertBefore(x(aa)).bind("fancybox-cleanup",function(){x(this).replaceWith(s.children())}).bind("fancybox-cancel",function(){x(this).replaceWith(K.children())});x(aa).appendTo(K);t();break;case"image":O=false;x.fancybox.showActivity();j=new Image();j.onerror=function(){z()};j.onload=function(){j.onerror=null;j.onload=null;P()};j.src=X;break;case"swf":ab='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+h.width+'" height="'+h.height+'"><param name="movie" value="'+X+'"></param>';W="";x.each(h.swf,function(ad,ae){ab+='<param name="'+ad+'" value="'+ae+'"></param>';W+=" "+ad+'="'+ae+'"'});ab+='<embed src="'+X+'" type="application/x-shockwave-flash" width="'+h.width+'" height="'+h.height+'"'+W+"></embed></object>";K.html(ab);t();break;case"ajax":V=X.split("#",2);Z=h.ajax.data||{};if(V.length>1){X=V[0];if(typeof Z=="string"){Z+="&selector="+V[1]}else{Z.selector=V[1]}}O=false;x.fancybox.showActivity();M=x.ajax(x.extend(h.ajax,{url:X,data:Z,error:z,success:function(ae,af,ad){if(M.status==200){K.html(ae);t()}}}));break;case"iframe":x('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" scrolling="'+h.scrolling+'" src="'+h.href+'"></iframe>').appendTo(K);q();break}},A=function(){if(!Q.is(":visible")){clearInterval(n);return}x("div",Q).css("top",(L*-40)+"px");L=(L+1)%12},l=function(){if(x("#fancybox-wrap").length){return}x("body").append(K=x('<div id="fancybox-tmp"></div>'),Q=x('<div id="fancybox-loading"><div></div></div>'),d=x('<div id="fancybox-overlay"></div>'),J=x('<div id="fancybox-wrap"></div>'));if(!x.support.opacity){J.addClass("fancybox-ie");Q.addClass("fancybox-ie")}b=x('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(J);b.append(s=x('<div id="fancybox-inner"></div>'),H=x('<a id="fancybox-close"></a>'),N=x('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),w=x('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));H.click(x.fancybox.close);Q.click(x.fancybox.cancel);N.click(function(V){V.preventDefault();x.fancybox.prev()});w.click(function(V){V.preventDefault();x.fancybox.next()});if(R){d.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");Q.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'");b.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>')}};x.fn.fancybox=function(V){x(this).data("fancybox",x.extend({},V,(x.metadata?x(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(X){X.preventDefault();if(O){return}O=true;x(this).blur();g=[];y=0;var W=x(this).attr("rel")||"";if(!W||W==""||W==="nofollow"){g.push(this)}else{g=x("a[rel="+W+"], area[rel="+W+"]");y=g.index(this)}C();return false});return this};x.fancybox=function(Y){if(O){return}O=true;var X=typeof arguments[1]!=="undefined"?arguments[1]:{};g=[];y=X.index||0;if(x.isArray(Y)){for(var W=0,V=Y.length;W<V;W++){if(typeof Y[W]=="object"){x(Y[W]).data("fancybox",x.extend({},X,Y[W]))}else{Y[W]=x({}).data("fancybox",x.extend({content:Y[W]},X))}}g=jQuery.merge(g,Y)}else{if(typeof Y=="object"){x(Y).data("fancybox",x.extend({},X,Y))}else{Y=x({}).data("fancybox",x.extend({content:Y},X))}g.push(Y)}if(y>g.length||y<0){y=0}C()};x.fancybox.showActivity=function(){clearInterval(n);Q.show();n=setInterval(A,66)};x.fancybox.hideActivity=function(){Q.hide()};x.fancybox.next=function(){return x.fancybox.pos(e+1)};x.fancybox.prev=function(){return x.fancybox.pos(e-1)};x.fancybox.pos=function(V){if(O){return}V=parseInt(V,10);if(V>-1&&v.length>V){y=V;C()}if(D.cyclic&&v.length>1&&V<0){y=v.length-1;C()}if(D.cyclic&&v.length>1&&V>=v.length){y=0;C()}return};x.fancybox.cancel=function(){if(O){return}O=true;x.event.trigger("fancybox-cancel");G();if(h&&x.isFunction(h.onCancel)){h.onCancel(g,y,h)}O=false};x.fancybox.close=function(){if(O||J.is(":hidden")){return}O=true;if(D&&x.isFunction(D.onCleanup)){if(D.onCleanup(v,e,D)===false){O=false;return}}G();x(H.add(N).add(w)).hide();x("#fancybox-title").remove();J.add(s).add(d).unbind();x(window).unbind("resize.fb scroll.fb");x(document).unbind("keydown.fb");function V(){d.fadeOut("fast");J.hide();x.event.trigger("fancybox-cleanup");s.empty();if(x.isFunction(D.onClosed)){D.onClosed(v,e,D)}v=h=[];e=y=0;D=h={};O=false}s.css("overflow","hidden");if(D.transitionOut=="elastic"){S=T();var W=J.position();c={top:W.top,left:W.left,width:J.width(),height:J.height()};if(D.opacity){c.opacity=1}p.prop=1;x(p).animate({prop:0},{duration:D.speedOut,easing:D.easingOut,step:i,complete:V})}else{J.fadeOut(D.transitionOut=="none"?0:D.speedOut,V)}};x.fancybox.resize=function(){var W,V;if(O||J.is(":hidden")){return}O=true;W=s.wrapInner("<div style='overflow:auto'></div>").children();V=W.height();J.css({height:V+(D.padding*2)+F});s.css({height:V});W.replaceWith(W.children());x.fancybox.center()};x.fancybox.center=function(){O=true;var W=k(),V=D.margin,X={};X.top=W[3]+((W[1]-((J.height()-F)+(m*2)))*0.5);X.left=W[2]+((W[0]-(J.width()+(m*2)))*0.5);X.top=Math.max(W[3]+V,X.top);X.left=Math.max(W[2]+V,X.left);J.css(X);O=false};x.fn.fancybox.defaults={padding:2,margin:20,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.2,overlayColor:"#ccc",titleShow:false,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null};x(document).ready(function(){l()})})(jQuery);